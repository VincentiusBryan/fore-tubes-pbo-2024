    CREATE TABLE transaksi (
    id_transaksi INT AUTO_INCREMENT PRIMARY KEY,
    id_user INT,
    total_harga DOUBLE,
    tanggal_transaksi TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE transaksi_detail (
    id_detail INT AUTO_INCREMENT PRIMARY KEY,
    id_transaksi INT,
    nama_item VARCHAR(255),
    tipe_item VARCHAR(50),
    ukuran VARCHAR(50),
    jumlah INT,
    harga_per_item DOUBLE,
    total_harga DOUBLE,
    id_promo int DEFAULT NULL,
    harga_sebelum_promo DOUBLE,
    harga_setelah_promo DOUBLE,
    FOREIGN KEY (id_transaksi) REFERENCES transaksi(id_transaksi)
);

ALTER TABLE transaksi_detail
ADD CONSTRAINT fk_promo
FOREIGN KEY (id_promo) REFERENCES promos(id_promo);

CREATE TABLE IF NOT EXISTS membership (
    id_membership int(11) NOT NULL AUTO_INCREMENT,
    duration int(11) NOT NULL COMMENT 'Duration in months',
    deskripsi text NOT NULL,
    harga int(11) NOT NULL,  -- Added price column
    PRIMARY KEY (id_membership)
);

CREATE TABLE IF NOT EXISTS transaksi_membership (
    id_transaksi_membership INT PRIMARY KEY AUTO_INCREMENT,
    id_user INT NOT NULL,
    id_membership INT NOT NULL,
    tanggal_transaksi DATETIME NOT NULL,
    metode_pembayaran VARCHAR(50) NOT NULL,
    total_pembayaran DECIMAL(10,2) NOT NULL,
    FOREIGN KEY (id_user) REFERENCES users(id_user),
    FOREIGN KEY (id_membership) REFERENCES membership(id_membership)
);

ALTER TABLE users
    ADD COLUMN id_membership int(11) DEFAULT NULL,
    ADD COLUMN start_date date DEFAULT NULL,
    ADD COLUMN end_date date DEFAULT NULL,
    ADD COLUMN status_aktif_membership tinyint(1) DEFAULT 0,
    ADD CONSTRAINT fk_membership FOREIGN KEY (id_membership) REFERENCES membership(id_membership);

INSERT INTO membership (duration, deskripsi, harga) VALUES
    (1, '1 Month - Benefits + 10 diskon untuk semua pesanan', 50000),
    (6, '6 Months - Benefits + 15% diskon untuk semua pesanan', 270000),
    (12, '12 Months - Benefits + 20% diskon untuk semua pesanan', 480000);


INI BARU (09-01-25) VB YG TAMBAHIN
--------------------------------------------------
ALTER TABLE transaksi_detail 
ADD COLUMN lokasi ENUM('Pick-up', 'Delivery') NOT NULL DEFAULT 'Pick-up',
ADD COLUMN alamat_delivery TEXT,
ADD COLUMN keterangan_delivery TEXT;

BARU JUGA -jordan

INSERT SATU SATU!!!!!!!!!!!
-------------------------------------
CREATE TABLE point_rewards (
    id_minuman INT PRIMARY KEY,
    nama_minuman VARCHAR(100) NOT NULL,
    point_cost INT NOT NULL,
    FOREIGN KEY (id_minuman) REFERENCES beverages(id_beverage)
);

CREATE TABLE point_redemptions (
    id_redemption INT PRIMARY KEY AUTO_INCREMENT,
    id_user INT NOT NULL,
    id_beverage INT NOT NULL,
    points_used INT NOT NULL,
    redemption_date DATETIME NOT NULL,
    FOREIGN KEY (id_user) REFERENCES users(id_user),
    FOREIGN KEY (id_beverage) REFERENCES beverages(id_beverage)
);

INSERT INTO point_rewards (id_beverage, nama_minuman, point_cost)
SELECT id_beverage, name, 10 FROM beverages
WHERE name IN ('Espresso', 'Americano', 'Cappuccino');
